<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Unified Confucian Caf√© Plan</title>
<style>
:root { --chinese-red:#8B0000; --chinese-gold:#FFD700; --paper-beige:#F5F5DC; --light-cream:#FFFEF0; --ink-black:#1a1a1a; --level-1:#8B0000; --level-2:#CD5C5C; --level-3:#555; --level-4:#777; }
*{margin:0;padding:0;box-sizing:border-box;}
body{background:linear-gradient(135deg,var(--paper-beige)0%,var(--light-cream)100%);color:var(--ink-black);margin:0;padding:0;width:100vw;max-width:100%;line-height:1.2;font-size:14px;font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;}
.container{width:100%;padding:0;margin:0;}
h1{font-size:24px;font-weight:900;margin:4px 0;padding:6px 4px;background:linear-gradient(135deg,var(--chinese-red),#CD5C5C);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-0.5px;}
h2{font-size:18px;font-weight:700;margin:8px 0 4px 0;padding:4px;border-left:4px solid var(--chinese-red);background:rgba(139,0,0,0.03);color:var(--level-1);}h3{font-size:14px;font-weight:600;margin:4px 0 2px 8px;color:var(--level-2);text-transform:uppercase;letter-spacing:0.5px;}
.two-column-layout{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;padding:4px;}
.collapsible{border:1px solid rgba(139,0,0,0.12);background:white;margin:4px 0;}
.collapsible-header{cursor:pointer;padding:6px 10px;background:linear-gradient(135deg,rgba(139,0,0,0.08),rgba(255,215,0,0.05));border-left:3px solid var(--chinese-gold);display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:13px;color:var(--level-2);}
.collapsible-header .arrow{transition:transform 0.3s ease;font-size:11px;color:var(--chinese-red);} .collapsible.open .collapsible-header .arrow{transform:rotate(90deg);} 
.collapsible-content{max-height:0;overflow:hidden;transition:max-height 0.3s ease;padding:0 10px;} .collapsible.open .collapsible-content{max-height:2200px;padding:6px 10px 8px 10px;}
.dense-list{list-style:none;padding:0;margin:0;} .dense-list li{padding:2px 0 2px 14px;border-left:2px solid transparent;position:relative;line-height:1.2;} .dense-list li:before{content:"‚ñ∏";position:absolute;left:0;font-size:10px;color:var(--chinese-red);} .dense-list li strong{color:var(--level-2);font-weight:600;}
.badge{display:inline-block;padding:1px 6px;border-radius:999px;font-size:10px;font-weight:600;background:rgba(139,0,0,0.14);color:var(--level-1);}
button{background:linear-gradient(135deg,var(--chinese-red),#CD5C5C);color:#fff;border:1px solid rgba(255,215,0,0.3);transition:all .2s ease;padding:4px 10px;margin:2px;font-size:12px;border-radius:2px;cursor:pointer;font-weight:600;}button:hover{transform:translateY(-1px);box-shadow:0 1px 4px rgba(139,0,0,0.3);}
</style>
</head>
<body>
<div class="container">
<header>
<h1>Unified Confucian Caf√© UI & Prompt Plan</h1>
<div style="text-align:right;margin:4px 4px 0 0;"><button id="expand-all">Expand All</button><button id="collapse-all">Collapse All</button></div>
</header>
<section class="collapsible" data-collapsible="open">
<div class="collapsible-header"><span>üéØ Objectives</span><span class="arrow">‚ñ∂</span></div>
<div class="collapsible-content">
<ul class="dense-list">
<li><strong>Simplify UI:</strong> Collapse phase-based layout into a single pane with mode toggles for Introduce, Cross-Response, and Synthesis behaviors.</li>
<li><strong>Prompt integration:</strong> Embed the provided XML skeleton into UI actions, including new <code>Recipient</code> routing per agent response.</li>
<li><strong>Routing logic:</strong> Define how agents choose recipients (self, moderator, specific peer) and how UI captures/visualizes that choice.</li>
<li><strong>Deliverables:</strong> Updated HTML mockup, prompt template update with <code>Recipient</code>, supportive explanation of routing workflow.</li>
</ul>
</div>
</section>
<section class="collapsible" data-collapsible="open">
<div class="collapsible-header"><span>üß≠ Workstream Plan</span><span class="arrow">‚ñ∂</span></div>
<div class="collapsible-content">
<h3>1. UX Restructure</h3>
<ul class="dense-list">
<li>Design single-screen layout: left (scenario summary + mode switch), center (conversation feed with routing badges), right (composer with recipient selector).</li>
<li>Define mode semantics: Introduce = moderator problem statement composer; Cross-Response = multi-agent targeting; Synthesis = global agent access.</li>
<li>Ensure timeline/history remains accessible via collapsible drawer rather than separate lanes.</li>
</ul>
<h3>2. Interaction Mechanics</h3>
<ul class="dense-list">
<li>Mode switch drives composer presets (prompt placeholder, recipient defaults, constraints).</li>
<li>Add dropdown for ‚ÄúSend As‚Äù (Moderator/User) and ‚ÄúRoute To‚Äù (All, Moderator, specific agent) to support routing requirement.</li>
<li>Display agent replies with visible <code>Recipient ‚Üí</code> badges for clarity.</li>
</ul>
<h3>3. Prompt Template Update</h3>
<ul class="dense-list">
<li>Extend <code>&lt;Directive&gt;</code> with <code>recipient</code> attribute or nested <code>&lt;Recipient&gt;</code> node reflecting UI route selection.</li>
<li>Within OutputContract instructions, require agents to include <code>recipient</code> in JSON (e.g., <code>"deliverTo": "mozi"</code>).</li>
<li>Document routing logic so moderator can override/validate before dispatch.</li>
</ul>
<h3>4. Mock Backend Flow</h3>
<ul class="dense-list">
<li>Adjust mock LLM handler to accept composer‚Äôs <code>routeTo</code> and emit responses flagged for chosen recipient.</li>
<li>Implement fallbacks: if agent picks unsupported recipient, UI surfaces warning.</li>
</ul>
<h3>5. QA & Narrative</h3>
<ul class="dense-list">
<li>Update Playwright spec to exercise each mode and verify recipient badge rendering.</li>
<li>Document within HTML mockup how agents can select recipients and how the prompt skeleton encodes it.</li>
</ul>
</div>
</section>
<section class="collapsible" data-collapsible="open">
<div class="collapsible-header"><span>üõ†Ô∏è Implementation Steps</span><span class="arrow">‚ñ∂</span></div>
<div class="collapsible-content">
<div class="two-column-layout">
<div>
<h3>UI Tasks</h3>
<ul class="dense-list">
<li>Create unified React/HTML structure with mode toggle component.</li>
<li>Move existing lane cards into single chronological feed with filters.</li>
<li>Add routing badges and composer dropdowns for recipient selection.</li>
</ul>
</div>
<div>
<h3>Prompt Tasks</h3>
<ul class="dense-list">
<li>Modify XML skeleton to include <code>&lt;Recipient role="{recipient_role}" target="{recipient_id}"/&gt;</code>.</li>
<li>Update OutputContract instructions to require <code>deliverTo</code> field.</li>
<li>Ensure context block includes latest routing info for agent awareness.</li>
</ul>
</div>
</div>
</div>
</section>
<section class="collapsible" data-collapsible="closed">
<div class="collapsible-header"><span>üìã Deliverable Checklist</span><span class="arrow">‚ñ∂</span></div>
<div class="collapsible-content">
<ul class="dense-list">
<li>Unified UI mockup HTML file with integrated prompt description.</li>
<li>Updated prompt template file reflecting recipient routing.</li>
<li>Explanation of agent routing decision process.</li>
<li>Playwright test adjustments (if time allows) validating modes.</li>
</ul>
</div>
</section>
<section class="collapsible" data-collapsible="closed">
<div class="collapsible-header"><span>‚è±Ô∏è Suggested Sequence</span><span class="arrow">‚ñ∂</span></div>
<div class="collapsible-content">
<ol class="dense-list" style="list-style-position:inside;margin-left:14px;">
<li>Refactor UI layout & mode toggles.</li>
<li>Add routing selectors and update mock LLM pipeline.</li>
<li>Revise prompt template with <code>Recipient</code> node + JSON contract change.</li>
<li>Refresh copy/spec documentation inside mockup.</li>
<li>Update automated tests.</li>
</ol>
</div>
</section>
</div>
<script>
document.addEventListener('DOMContentLoaded',function(){document.querySelectorAll('[data-collapsible]').forEach(function(section){const isOpen=section.getAttribute('data-collapsible')==='open';section.classList.add('collapsible');if(isOpen) section.classList.add('open');});document.querySelectorAll('.collapsible-header').forEach(function(header){header.addEventListener('click',function(){const collapsible=this.closest('.collapsible');collapsible.classList.toggle('open');});});const expandAllBtn=document.getElementById('expand-all');const collapseAllBtn=document.getElementById('collapse-all');if(expandAllBtn){expandAllBtn.addEventListener('click',function(){document.querySelectorAll('.collapsible').forEach(function(c){c.classList.add('open');});});}if(collapseAllBtn){collapseAllBtn.addEventListener('click',function(){document.querySelectorAll('.collapsible').forEach(function(c){c.classList.remove('open');});});}});
</script>
</body>
</html>
